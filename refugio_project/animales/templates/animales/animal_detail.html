{% extends 'base.html' %} 

{% block title %}Detalle de {{ animal.nombre }}{% endblock %}

{% block content %}
    <h2 class="text-primary mb-4"> Detalles de {{ animal.nombre }} </h2>
    
    <div class="row border p-4 rounded shadow-sm">
        
        <div class="col-md-5 mb-3 mb-md-0">
            {% if animal.foto %}
                <img src="{{ animal.foto.url }}" alt="Foto de {{ animal.nombre }}" 
                    class="img-fluid rounded" style="max-height: 400px; object-fit: cover;">
            {% else %}
                <p class>No hay foto disponible.</p>
            {% endif %}
        </div>

        <div class="col-md-7">
            <h3>Datos Principales</h3>
            <ul>
                <li>Especie: {{ animal.especie }}</li>
                <li>Raza: {{ animal.raza }}</li>
                <li>Edad: {{ animal.edad }} años</li>
                <li>Sexo: {{ animal.sexo }}</li>
            </ul>

            <h3>Descripción</h3>
            <p>{{ animal.descripcion }}</p>

            {% if animal.subido_por %}
                <p>
                    <small class="text-muted">
                        Publicado por: <strong>{{ animal.subido_por.username }}</strong>
                    </small>
                </p>
            {% endif %}

            <hr>
            
            <h4>Acciones de Gestión</h4>
            
            {% if user.is_authenticated %}
                
                <div class="d-flex flex-wrap mb-3"> 
                    
                    <a href="{% url 'animales:adoptar' pk=animal.pk %}" 
                       class="btn btn-success btn-sm me-2">
                       <i class></i>Adoptar este Animal
                    </a>

                    <a href="{% url 'animales:editar' pk=animal.pk %}" 
                       class="btn btn-warning btn-sm me-2">
                        Editar Datos
                    </a>
                    
                    <a href="{% url 'animales:eliminar' pk=animal.pk %}" 
                       class="btn btn-danger btn-sm">
                        Eliminar Animal
                    </a>

                </div>
                {% else %}
                <p class="alert alert-info">Inicia sesión para ver las opciones de gestión y adopción.</p>
            {% endif %}

            <div class="mt-3">
                <a href="{% url 'animales:lista' %}" class="btn btn-secondary btn-sm">
                    Volver al Listado
                </a>
            </div>
        </div>
    </div>
{% endblock %}